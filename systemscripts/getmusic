#!/bin/sh

musiclocation() {
    [ ! -d ~/downloadmusic ] && mkdir ~/downloadmusic
    cd ~/downloadmusic || exit
    mv * album
    mv album "$musicpath"
    cd "$musicpath" || exit
    touch times
}

echo "what would you like the artist directory to be called? "; read -r artistname
echo "what would you like the album directory to be called? "; read -r albumname
[ -z "$artistname" ] && notify-send "Nothing entered, exiting..." && exit
[ -z "$albumname" ] && notify-send "Nothing entered, exiting..." && exit
[ -z "$1" ] && notify-send "No link found, please enter a link" && exit

if { [ -e ~/music/$artistname ] && [ -e ~/music/$artistname/$albumname ]; }; then
    echo "That already exists"
elif { [ -e ~/music/$artistname ] && [ ! -e ~/music/$artistname/$albumname ]; }; then 
    mkdir ~/music/$artistname/$albumname
    cd ~/music/$artistname/$albumname || exit
    musicpath=$PWD
    youtube-dl -f m4a $1
    musiclocation
else
    mkdir -p ~/music/$artistname/$albumname
    cd ~/music/$artistname/$albumname || exit
    musicpath=$PWD
    youtube-dl -f m4a $1
    musiclocation
fi
