#!/bin/bash
#TODO add program list to fordeletetest

###
#requires a list of programs you want installed
###

#make sure you have networkmanager, networkmanager-runit, 
#openssh openssh-runit and git installed already
#make sure you have generated your ssh keys and added them on github

CYAN='\033[0;36m'
GREEN='\033[0;32m'
RED='\033[0;31m'
NC='\033[0m'

#check for internet connection
if ping -q -c 1 -W 1 1.1.1.1 > /dev/null 2>&1; then
    echo "${GREEN}Internet is up${NC}"
else
    echo "${RED}Internet is down${NC}"
    exit
fi

#check if programs are installed, install them if not
while IFS= read -r line; do

    if ! [ -x "$(command -v "$line")" ]; then
        echo -e "${CYAN}"$line" is not installed, installing now${NC}"
        sudo pacman --noconfirm -S "$line"
    else
        echo -e "${GREEN}"$line" is already installed${NC}"
    fi

done < fordeletetest

mkdir ~/.config
#check for directories
dirs=( "dunst" "alacritty" "ncmpcpp" "nvim" "picom" "ranger" "i3" "mpd" "music" "walls" "scripts" ".newsboat" )

for i in "${dirs[@]}"; do
    case "$i" in
        "music") [ ! -d ~/music ] && mkdir ~/music ;;
        "walls") [ ! -d ~/walls ] && mkdir ~/walls ;;
        "scripts") [ ! -d ~/scripts ] && mkdir ~/scripts ;;
        ".newsboat") [ ! -d ~/.newsboat ] && mkdir ~/.newsboat ;;
        *) [ ! -d ~/.config/"$i" ] && mkdir ~/.config/"$i" ;;
    esac
done

#cp configs from git directory
/bin/cp -ivrf ~/archconfig/dunstrc ~/.config/dunst/
/bin/cp -ivrf ~/archconfig/ncmpcppbindings ~/.config/ncmpcpp/bindings
/bin/cp -ivrf ~/archconfig/init.vim ~/.config/nvim/
/bin/cp -ivrf ~/archconfig/picom.conf ~/.config/picom/
/bin/cp -ivrf ~/archconfig/rc.conf ~/.config/ranger/
/bin/cp -ivrf ~/archconfig/rifle.conf ~/.config/ranger/
/bin/cp -ivrf ~/archconfig/alacritty.yml ~/.config/alacritty/
/bin/cp -ivrf ~/archconfig/mpd.conf ~/.mpd/
/bin/cp -ivrf ~/archconfig/config ~/.config/i3/
/bin/cp -ivrf ~/archconfig/i3scripts/* ~/.config/i3/scripts
/bin/cp -ivrf ~/archconfig/walls/* ~/walls
/bin/cp -ivrf ~/archconfig/systemscripts/* ~/scripts/
/bin/cp -ivrf ~/archconfig/.newsboat/* ~/.newsboat/
/bin/cp -ivrf ~/archconfig/.Xdefaults ~/
/bin/cp -ivrf ~/archconfig/.xinitrc ~/
/bin/cp -ivrf ~/archconfig/.zprofile ~/
/bin/cp -ivrf ~/archconfig/.zshrc ~/


